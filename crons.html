<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cron Jobs | Croati Mission Control</title>
<link rel="stylesheet" href="style.css">
<style>
.history-table { width:100%; border-collapse:collapse; }
.history-table th { background:#1a1a2e; padding:10px; text-align:left; color:#888; font-size:12px; text-transform:uppercase; }
.history-table td { padding:10px; border-bottom:1px solid #333; font-size:13px; }
.history-table tr:hover { background:rgba(255,107,0,0.05); }
.status-badge { display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border-radius:12px; font-size:11px; font-weight:500; }
.status-success { background:rgba(34,197,94,0.2); color:#22c55e; }
.status-failed { background:rgba(239,68,68,0.2); color:#ef4444; }
.status-running { background:rgba(245,158,11,0.2); color:#f59e0b; animation:pulse 1.5s infinite; }
.job-output { max-width:200px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; color:#888; font-family:monospace; font-size:11px; }
.history-empty { text-align:center; padding:40px; color:#888; }
.history-empty-icon { font-size:48px; display:block; margin-bottom:16px; }
.clear-history-btn { background:rgba(239,68,68,0.2) !important; border-color:rgba(239,68,68,0.5) !important; color:#ef4444 !important; }
.clear-history-btn:hover { background:rgba(239,68,68,0.3) !important; }
</style>
</head>
<body>
<header class="header">
<div class="header-brand">
<span class="lobster-icon">ü¶û</span>
<h1>CROATI MISSION CONTROL</h1>
<span class="live-badge">LIVE</span>
</div>
<div class="header-actions">
<button class="btn btn-secondary" onclick="refreshAll()">üîÑ Refresh</button>
<button class="btn" onclick="addCron()">+ Add Cron Job</button>
</div>
</header>
<nav class="nav">
<ul>
<li><a href="index.html">Dashboard</a></li>
<li><a href="agents.html">Agents</a></li>
<li><a href="crons.html" class="active">Cron Jobs</a></li>
<li><a href="missions.html">Mission Log</a></li>
</ul>
</nav>
<main class="dashboard">
<div class="card">
<div class="card-header">
<h2><span>üìä</span> CRON OVERVIEW</h2>
</div>
<div class="card-body">
<div class="pipeline-stats">
<div class="stat-item">
<div class="stat-number" id="active-count">2</div>
<div class="stat-label">Active Jobs</div>
</div>
<div class="stat-item">
<div class="stat-number" id="disabled-count">0</div>
<div class="stat-label">Disabled</div>
</div>
<div class="stat-item">
<div class="stat-number" id="failed-count">-</div>
<div class="stat-label">Failed (24h)</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-header">
<h2><span>‚è∞</span> ACTIVE CRON JOBS</h2>
</div>
<div class="card-body">
<div class="mission-list" id="cron-list">
<p class="placeholder">Loading cron jobs...</p>
</div>
</div>
</div>
<div class="card section-full">
<div class="card-header">
<h2><span>üìú</span> RUN HISTORY</h2>
<button class="btn btn-secondary clear-history-btn" onclick="clearHistory()">üóëÔ∏è Clear History</button>
</div>
<div class="card-body">
<div id="history-container">
<p class="placeholder">Loading run history...</p>
</div>
</div>
</div>
<div class="card section-full">
<div class="card-header">
<h2><span>üìñ</span> CRON REFERENCE</h2>
</div>
<div class="card-body">
<table style="width:100%;color:var(--text-secondary);font-family:monospace;font-size:0.875rem;">
<tr style="border-bottom:1px solid var(--border);">
<td style="padding:0.5rem;"><strong>Expression</strong></td>
<td style="padding:0.5rem;"><strong>Meaning</strong></td>
<td style="padding:0.5rem;"><strong>Example</strong></td>
</tr>
<tr style="border-bottom:1px solid var(--border);">
<td style="padding:0.5rem;">30 7 * * *</td>
<td style="padding:0.5rem;">Daily at 7:30 AM</td>
<td style="padding:0.5rem;">Morning briefing</td>
</tr>
<tr style="border-bottom:1px solid var(--border);">
<td style="padding:0.5rem;">0 20 * * *</td>
<td style="padding:0.5rem;">Daily at 8:00 PM</td>
<td style="padding:0.5rem;">Evening prep</td>
</tr>
<tr style="border-bottom:1px solid var(--border);">
<td style="padding:0.5rem;">0 */6 * * *</td>
<td style="padding:0.5rem;">Every 6 hours</td>
<td style="padding:0.5rem;">Periodic check</td>
</tr>
<tr>
<td style="padding:0.5rem;">0 9 * * MON</td>
<td style="padding:0.5rem;">Mondays at 9:00 AM</td>
<td style="padding:0.5rem;">Weekly report</td>
</tr>
</table>
</div>
</div>
</main>
<script src="crons.js"></script>
<script>
function refreshAll() {
location.reload();
}
function addCron() {
const name = prompt('Cron job name:');
const schedule = prompt('Schedule (e.g., "30 7 * * *" for 7:30 AM daily):');
const task = prompt('What should this cron do?');
if (name && schedule && task) {
alert('üöÄ Creating new cron job...\n(This is a demo - actual implementation would create the job)');
}
}
async function clearHistory() {
if (!confirm('Clear all run history? This cannot be undone.')) return;
try {
const res = await fetch('/api/crons/history', { method: 'DELETE' });
if (res.ok) {
alert('‚úÖ History cleared');
location.reload();
} else {
alert('‚ùå Failed to clear history');
}
} catch (e) {
alert('‚ùå Error: ' + e.message);
}
}
</script>
</body>
</html>